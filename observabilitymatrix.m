
% y(:,1) = [2;2;2;1]; y(:,2) = [4; 1; 1; 1]; y(:,3) = [1; 2;3;1]; y(:,4) = [3;2;1;1]; y(:,5) = [-1;3;1;1]; y(:,6) = [2;2;3;1]; 
% y(:,7) = [2; 1; 2; 1]; y(:,8) = [3;4;5;1] ; y(:,9) = [ 5;3;1;1] ; y(:,10) = [7;8;9;1]; y(:,11) = [2;5;7;1]; y(:,12) = [3;6;8;1];
% y(:,13) = [1;5;9;1]; y(:,14) = [3;7;8;1];

% y(:,1) = [2;2;2;1]; y(:,2) = [4;4;4;1]; y(:,3) = [1; 2;3;1]; y(:,4) = [3;2;1;1]; y(:,5) = [-1;3;1;1]; y(:,6) = [2;2;3;1]; 
% y(:,7) = [2; 1; 2; 1]; y(:,8) = [3;4;5;1] ; y(:,9) = [ 5;3;1;1] ; y(:,10) = [7;8;9;1]; y(:,11) = [2;5;7;1]; y(:,12) = [3;6;8;1];
% y(:,13) = [1;5;9;1]; y(:,14) = [3;7;8;1];

% y(:,1) = [1;2;3;1]; y(:,2) = [1.2;2.4;3.6;1]; y(:,3) = [1.3;2.6;3.9;1]; y(:,4) = [2.6;5.2;7.8;1]; y(:,5) = [1.7;3.4;5.1;1]; y(:,6) = [1.9;3.8;5.7;1]; 
% y(:,7) = [2.2;4.4;6.6;1]; y(:,8) = [3;5;4;1] ;  y(:,9) = [ 5;3;1;1] ; y(:,10) = [7;8;9;1]; y(:,11) = [2;5;7;1]; y(:,12) = [3;6;8;1];
% y(:,13) = [1;5;9;1]; y(:,14) = [3;7;8;1];

%  y(:,1) = [1;2;3;1]; y(:,2) = [1.2;2.4;3.6;1]; y(:,3) = [1.3;2.6;3.9;1]; y(:,4) = [2.6;5.2;7.8;1]; y(:,5) = [1.7;3.4;5.1;1]; y(:,6) = [1.9;3.8;5.7;1]; y(:,7) = [2.2;4.4;6.6;1]; 


% y(:,1) = [1;2;3;1]; y(:,2) = [1.2;2.4;3.6;1]; y(:,3) = [1.3;2.6;3.9;1]; y(:,4) = [2.6;5.2;7.8;1]; y(:,5) = [1.7;3.4;5.1;1]; y(:,6) = [-1;-2;-3;1];  y(:,7) = [5;4;1;1]; 

% y(:,1) = [1;2;3;1]; y(:,2) = [1.2;2.4;3.6;1]; y(:,3) = [1.5;3.5;5;1]; y(:,4) = [3;7;8;1]; y(:,5) = [3;5;4;1];  y(:,6) = [3.6;6;4.8;1] ;y(:,7) = [7.2;13;10.4;1];

%  y(:,1) = [1;2;3;1]; y(:,2) = [2;7;1;1]; y(:,3) = [1.5;3.5;5;1]; y(:,4) = [3;7;8;1]; y(:,5) = [3;5;4;1];  y(:,6) = [5;4;1;1] ;y(:,7) = [7.2;13;10.4;1];

% y(:,1) = [1;2;3;1]; y(:,2) = [2;7;1;1]; y(:,3) = [5;4;1;1]; y(:,4) = [3;5;4;1];
% y(:,1) = [1;2;3;1]; y(:,2) = [1.2;2.4;3.6;1]; y(:,3) = [1.3;2.6;3.9;1]; y(:,4) = [2.6;5.2;7.8;1];
% y(:,1) = [1;2;3;1];  y(:,2) = [5;4;1;1]; y(:,3) = [1.3;2.6;3.9;1]; y(:,4) = [2.6;5.2;7.8;1];
% y(:,1) = [0;0;1;1]; y(:,2) = [0;0;2;1]; y(:,3) = [0;0;3;1]; y(:,4) = [0;0;4;1]; y(:,5) = [0;0;-1;1]; y(:,6) = [0;0;-2;1]; y(:,7) = [0;0;-3;1]; 

% y(:,1) = [0;0;1;1]; y(:,2) = [0;0;2;1]; y(:,3) = [0;0;-1;1]; y(:,4) = [0;0;-4;1]; y(:,5) = [0;4;1;1]; y(:,6) = [0;4;2;1]; y(:,7) = [0;4;3;1]; 
 
% y(:,1) = [1;1;3;1]; y(:,2) = [3;1;2;1]; y(:,3) = [3;2;1;1]; y(:,4)= [3;4;4;1]; y(:,5)=[2;4;2;1] ;



for i = 1:iter
   yprime(:,:,i) = [y.' ; y.'*se3_t(:,:,i)];
   robs(i) = rank(yprime(:,:,i));
end;  


C = y;
C(4,:) = [];
R = C(:,1).*ones(3,lengthy);
Cr = C - R; 
% b = (y(:,3)-y(:,1)).'*(y(:,2)-y(:,1))
% K = kron(Cr.',eye(3));
% display(K);  
% rk = rank(K)
% M = [K;kron(Cr.',w_hat_t(:,:,1));
%     kron(Cr.',w_hat_t(:,:,1)*w_hat_t(:,:,1));
%     kron(Cr.',w_hat_t(:,:,1)*w_hat_t(:,:,1)*w_hat_t(:,:,1));
%     kron(Cr.',w_hat_t(:,:,1)*w_hat_t(:,:,1)*w_hat_t(:,:,1)*w_hat_t(:,:,1));
%     kron(Cr.',w_hat_t(:,:,1)*w_hat_t(:,:,1)*w_hat_t(:,:,1)*w_hat_t(:,:,1)*w_hat_t(:,:,1));
%     kron(Cr.',w_hat_t(:,:,1)*w_hat_t(:,:,1)*w_hat_t(:,:,1)*w_hat_t(:,:,1)*w_hat_t(:,:,1)*w_hat_t(:,:,1))
%     kron(Cr.',w_hat_t(:,:,1)*w_hat_t(:,:,1)*w_hat_t(:,:,1)*w_hat_t(:,:,1)*w_hat_t(:,:,1)*w_hat_t(:,:,1)*w_hat_t(:,:,1));
%     kron(Cr.',w_hat_t(:,:,1)*w_hat_t(:,:,1)*w_hat_t(:,:,1)*w_hat_t(:,:,1)*w_hat_t(:,:,1)*w_hat_t(:,:,1)*w_hat_t(:,:,1)*w_hat_t(:,:,1))
%     kron(Cr.',w_hat_t(:,:,1)*w_hat_t(:,:,1)*w_hat_t(:,:,1)*w_hat_t(:,:,1)*w_hat_t(:,:,1)*w_hat_t(:,:,1)*w_hat_t(:,:,1)*w_hat_t(:,:,1)*w_hat_t(:,:,1));
%  ];
% rm = rank(M)
K = kron(y*y.',eye(4));
display(K);  
rk = rank(K)
M = [kron(y.',eye(4));
    kron(y.',se3_t(:,:,i));
    kron(y.',se3_t(:,:,i)*se3_t(:,:,i));
    kron(y.',se3_t(:,:,i)*se3_t(:,:,i)*se3_t(:,:,i));
    kron(y.',se3_t(:,:,i)*se3_t(:,:,i)*se3_t(:,:,i)*se3_t(:,:,i));
    kron(y.',se3_t(:,:,i)*se3_t(:,:,i)*se3_t(:,:,i)*se3_t(:,:,i)*se3_t(:,:,i));
    kron(y.',se3_t(:,:,i)*se3_t(:,:,i)*se3_t(:,:,i)*se3_t(:,:,i)*se3_t(:,:,i)*se3_t(:,:,i))
    kron(y.',se3_t(:,:,i)*se3_t(:,:,i)*se3_t(:,:,i)*se3_t(:,:,i)*se3_t(:,:,i)*se3_t(:,:,i)*se3_t(:,:,i));
    kron(y.',se3_t(:,:,i)*se3_t(:,:,i)*se3_t(:,:,i)*se3_t(:,:,i)*se3_t(:,:,i)*se3_t(:,:,i)*se3_t(:,:,i)*se3_t(:,:,i))
    kron(y.',se3_t(:,:,i)*se3_t(:,:,i)*se3_t(:,:,i)*se3_t(:,:,i)*se3_t(:,:,i)*se3_t(:,:,i)*se3_t(:,:,i)*se3_t(:,:,i)*se3_t(:,:,i));
 ];
% display(M); 
rm = rank(M)

